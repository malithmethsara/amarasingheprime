<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Calculate vehicle import taxes for Sri Lanka in 2025 with Amarasinghe Prime Enterprises' accurate tax calculator. Instant estimates for petrol, diesel, hybrid, and electric cars.">
    <meta name="keywords" content="Sri Lanka vehicle tax calculator, vehicle import taxes 2025, Japanese car import Sri Lanka, petrol car tax, diesel car tax, hybrid car tax, electric vehicle tax, Amarasinghe Prime Enterprises">
    <meta name="author" content="Amarasinghe Prime Enterprises">
    <meta name="robots" content="index, follow">
    <meta name="google-site-verification" content="8w8943-d9d83m2s">
    <title>Sri Lanka Vehicle Tax Calculator 2025 - Amarasinghe Prime Enterprises</title>
    
    <meta property="og:title" content="Sri Lanka Vehicle Tax Calculator 2025 by Amarasinghe Prime Enterprises">
    <meta property="og:description" content="Accurately calculate import taxes for Japanese vehicles in Sri Lanka with our 2025 tax calculator for petrol, diesel, hybrid, and electric cars.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://amarasingheprime.lk">
    <meta property="og:image" content="https://amarasingheprime.lk/social-share-image.jpg">
    <meta property="og:image:alt" content="Sri Lanka Vehicle Tax Calculator Interface">
    <meta property="og:site_name" content="Amarasinghe Prime Enterprises">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Sri Lanka Vehicle Tax Calculator 2025 by Amarasinghe Prime Enterprises">
    <meta name="twitter:description" content="Accurately calculate import taxes for Japanese vehicles in Sri Lanka with our 2025 tax calculator for petrol, diesel, hybrid, and electric cars.">
    <meta name="twitter:image" content="https://amarasingheprime.lk/social-share-image.jpg">

    <link rel="canonical" href="https://amarasingheprime.lk">
    <link rel="icon" href="https://amarasingheprime.lk/favicon.ico" sizes="48x48">
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;700&display=swap" as="style" onload="this.rel='stylesheet'">
    <link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" as="style" onload="this.rel='stylesheet'">
    <link rel="preload" href="/logo.png" as="image">
    <style>
        :root {
            --primary: #003087;
            --primary-hover: #002060;
            --primary-light: #e3edfb;
            --bg1: #f7f9fc;
            --bg2: #e9eff6;
            --text: #2b2b2b;
            --muted: #5b5b5b;
            --card: #fff;
            --soft-facebook: #e3edfb;
            --soft-whatsapp: #e6f7ec;
            --soft-black: #f4f4f4;
            --soft-facebook-border: #b6d2f7;
            --soft-whatsapp-border: #b9eac7;
            --soft-black-border: #d1d1d1;
            --banner-blue: #e6f0fa;
            --soft-red: #ffe6e6; /* Softer red for border */
        }
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        body {
            font-family: 'Open Sans', sans-serif;
            background: linear-gradient(90deg, var(--bg1), var(--bg2));
            color: var(--text);
            max-width: 1200px;
            margin: 0 auto;
            padding: 1.5rem 1rem 2.5rem;
            line-height: 1.5;
        }
        header {
            display: grid;
            grid-template-columns: 1fr;
            gap: 0.375rem;
            align-items: center;
            justify-items: center;
            margin-bottom: 0.625rem;
        }
        header img {
            max-width: 160px;
            height: auto;
        }
        header h1 {
            font-weight: 700;
            font-size: clamp(1.8rem, 5vw, 2.4rem);
            color: var(--primary);
            text-align: center;
        }
        header .tagline {
            color: var(--muted);
            font-weight: 600;
            text-align: center;
            font-size: 1rem;
        }
        #timeDateTime {
            text-align: center;
            color: var(--muted);
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }
        .contact {
            display: flex;
            flex-wrap: wrap;
            gap: 0.875rem;
            align-items: center;
            justify-content: center;
            margin: 0.625rem 0;
            font-weight: 600;
        }
        .contact a {
            text-decoration: none;
            font-size: 1rem;
            transition: transform 0.2s;
        }
        .contact a:hover {
            transform: scale(1.05);
        }
        .contact .chip {
            display: inline-flex;
            gap: 0.5rem;
            align-items: center;
            padding: 0.5rem 0.75rem;
            border-radius: 999px;
            background: var(--card);
            box-shadow: 0 2px 8px rgba(0,0,0,0.06);
            border: 1px solid rgb(220,230,246);
            transition: background 0.18s, border-color 0.18s, color 0.18s;
        }
        .contact .chip i {
            width: 1.125rem;
            text-align: center;
        }
        .phone-chip {
            background: var(--soft-black);
            color: #222;
            border: 1px solid var(--soft-black-border);
        }
        .phone-chip i, .phone-chip strong {
            color: #444;
        }
        .whatsapp-chip {
            background: var(--soft-whatsapp);
            color: #229e59;
            border: 1px solid var(--soft-whatsapp-border);
        }
        .whatsapp-chip i {
            color: #229e59;
        }
        .facebook-chip {
            background: var(--soft-facebook);
            color: #1877f3;
            border: 1px solid var(--soft-facebook-border);
        }
        .facebook-chip i {
            color: #1877f3;
        }
        .container-main {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-top: 0.625rem;
            justify-content: space-between;
            align-items: stretch;
        }
        .form-section, .result-section {
            flex: 1 1 340px;
            min-width: 340px;
            max-width: 540px;
            background: var(--card);
            border: 1px solid rgba(0,48,135,0.15);
            box-shadow: 0 4px 16px rgba(0,0,0,0.06);
            border-radius: 1rem;
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            min-height: 680px;
        }
        .form-section-title {
            text-align: center;
            font-weight: 700;
            margin-bottom: 0.75rem;
            color: var(--primary);
            font-size: 1.15rem;
        }
        #cbslRate {
            margin-bottom: 1rem;
        }
        label {
            display: block;
            margin-top: 0.875rem;
            font-weight: 700;
            font-size: 0.98rem;
        }
        input, select {
            width: 100%;
            padding: 0.75rem;
            margin-top: 0.375rem;
            border: 1px solid var(--primary);
            border-radius: 0.625rem;
            font-size: 1rem;
            background: #fff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            transition: border-color 0.15s, box-shadow 0.15s;
        }
        input:focus, select:focus {
            outline: none;
            border-color: var(--primary-hover);
            box-shadow: 0 0 5px rgba(0,48,135,0.3);
        }
        select {
            appearance: none;
            background: #fff url("data:image/svg+xml;charset=UTF-8,%3Csvg width='14' height='14' viewBox='0 0 20 20' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M6 8l4 4 4-4' stroke='%23003087' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E") no-repeat right 0.75rem center/1rem 1rem;
        }
        .btn-row {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            margin-top: 1.125rem;
        }
        .blue-btn {
            flex: 1 1 180px;
            padding: 0.75rem;
            border: none;
            border-radius: 0.625rem;
            cursor: pointer;
            font-size: 1rem;
            color: #fff;
            background: var(--primary);
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            transition: background 0.18s, transform 0.2s;
            font-weight: 700;
            height: 2.75rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .blue-btn:hover {
            background: var(--primary-hover);
            transform: translateY(-2px);
        }
        #downloadBtn {
            display: none;
            flex: 1 1 180px;
            height: 2.75rem;
            margin-top: 1.125rem;
        }
        .result-section-title {
            font-weight: 700;
            margin-bottom: 0.625rem;
            color: var(--primary);
            font-size: 1.12rem;
        }
        #result {
            margin-top: 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 0.5rem;
        }
        thead th {
            background: var(--primary);
            color: #fff;
            padding: 0.625rem;
            text-align: left;
            font-weight: 600;
        }
        tbody td {
            padding: 0.5625rem 0.625rem;
            border-bottom: 1px solid rgba(0,48,135,0.15);
        }
        tfoot td {
            padding: 0.625rem;
            font-weight: 700;
            background: #f0f4fa;
        }
        #pieChart {
            display: none;
            margin: 1.25rem auto 0;
            max-width: 100%;
            background: transparent;
        }
        footer {
            text-align: center;
            width: 100%;
            margin-top: 1.625rem;
            color: #555;
            font-size: 0.92rem;
            padding: 0.875rem 0;
        }
        .faq-section, .info-section, .disclaimer-section, .social-proof, .marketing-banner {
            background: var(--card);
            border: 1px solid rgba(0,48,135,0.15);
            box-shadow: 0 4px 16px rgba(0,0,0,0.06);
            border-radius: 1rem;
            padding: 1.5rem;
            margin-top: 1.25rem;
            text-align: center;
        }
        .marketing-banner {
            padding: 1rem;
            background: var(--banner-blue);
            color: #000;
            font-weight: 700;
            font-size: 1.1rem;
            transition: transform 0.2s;
            border: 2px solid var(--soft-red);
            cursor: pointer; /* Make entire box look clickable */
        }
        .marketing-banner:hover {
            transform: translateY(-2px);
        }
        .marketing-banner a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 800;
            transition: color 0.2s;
            display: block; /* Make link fill the div */
        }
        .marketing-banner a:hover {
            color: var(--primary-hover);
            text-decoration: underline;
        }
        .social-proof {
            padding: 0.875rem 1.5rem;
        }
        .faq-section h2, .info-section h2, .disclaimer-section h2, .social-proof h2, .marketing-banner h2 {
            text-align: center;
            font-weight: 700;
            font-size: 1.4rem;
            color: var(--primary);
            margin-bottom: 1.125rem;
        }
        .faq-item {
            margin-bottom: 1rem;
            text-align: left;
        }
        .faq-item h3 {
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--text);
            margin: 0 0 0.5rem;
            cursor: pointer;
            transition: color 0.2s;
            display: inline;
        }
        .faq-item h3:hover {
            color: var(--primary);
        }
        .faq-item p {
            font-size: 0.95rem;
            color: var(--muted);
            line-height: 1.6;
            display: none;
            margin-left: 1.5rem;
        }
        .faq-item.active p {
            display: block;
        }
        .info-section p, .disclaimer-section p, .social-proof p {
            font-size: 0.95rem;
            color: var(--muted);
            line-height: 1.6;
            margin-bottom: 1rem;
        }
        .info-section h3 {
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--text);
            margin: 0 0 0.25rem 0;
            text-align: left;
        }
        .info-section ul {
            padding-left: 1.25rem;
            margin-bottom: 1rem;
            text-align: left;
            list-style-position: inside;
        }
        .info-section li {
            margin-bottom: 1.5rem;
            font-size: 0.95rem;
            text-align: left;
            display: flex;
            flex-direction: column;
        }
        .info-section li p {
            margin-top: 0;
            margin-left: 0;
            text-align: left;
        }
        .info-section a, .result-section a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
            transition: color 0.2s;
        }
        .info-section a:hover, .result-section a:hover {
            color: var(--primary-hover);
            text-decoration: underline;
        }
        .disclaimer-section ul {
            list-style: none;
            padding: 0;
            font-size: 0.95rem;
            color: var(--muted);
        }
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            border: 0;
        }
        .faq-indicator {
            margin-left: 0.5rem;
            transition: transform 0.3s;
        }
        .faq-item.active .faq-indicator {
            transform: rotate(90deg);
        }
        .result-placeholder {
            font-size: 0.95rem;
            color: var(--muted);
            text-align: center;
            margin-bottom: 1.5rem; /* Increased space between phrases */
        }
        .result-help {
            font-size: 0.95rem;
            color: var(--muted);
            text-align: center;
        }
        @media (max-width: 640px) {
            body {
                padding: 1.5rem 2% 2.5rem;
            }
            header img {
                max-width: 140px;
            }
            header h1 {
                font-size: clamp(1.5rem, 4.5vw, 1.9rem);
            }
            .form-section, .result-section, .social-proof, .marketing-banner {
                padding: 1.25rem;
                min-width: 100%;
                max-width: 100%;
                min-height: auto;
            }
            .marketing-banner {
                padding: 0.75rem;
                font-size: 1rem;
            }
            .social-proof {
                padding: 0.75rem 1.25rem;
            }
            .container-main {
                flex-direction: column;
                gap: 1rem;
            }
            .contact {
                flex-direction: column;
                gap: 0.5rem;
                margin: 0.5rem 0;
            }
            .contact a {
                width: 100%;
                text-align: center;
            }
            .contact .chip {
                width: 100%;
                justify-content: center;
                font-size: 0.95rem;
                padding: 0.625rem;
            }
            .btn-row {
                gap: 0.5rem;
            }
            .blue-btn {
                font-size: 0.95rem;
            }
            #downloadBtn {
                margin-top: 1rem;
            }
            .faq-section, .info-section, .disclaimer-section {
                padding: 1.25rem;
            }
            .faq-section h2, .info-section h2, .disclaimer-section h2, .social-proof h2, .marketing-banner h2 {
                font-size: 1.2rem;
            }
            .faq-item h3, .info-section h3 {
                font-size: 1rem;
            }
            #pieChart {
                max-width: 95vw;
            }
            .result-placeholder, .result-help {
                font-size: 0.9rem;
            }
        }
    </style>
    
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@graph": [
        {
          "@type": "LocalBusiness",
          "name": "Amarasinghe Prime Enterprises (Pvt) Ltd",
          "image": "https://amarasingheprime.lk/logo.png",
          "url": "https://amarasingheprime.lk/",
          "telephone": "+94 76 944 7740",
          "address": {
            "@type": "PostalAddress",
            "streetAddress": "3rd Lane, Malabe",
            "addressLocality": "Malabe",
            "addressRegion": "Western Province",
            "postalCode": "10115",
            "addressCountry": "LK"
          },
          "openingHoursSpecification": [
            {
              "@type": "OpeningHoursSpecification",
              "dayOfWeek": [
                "Monday",
                "Tuesday",
                "Wednesday",
                "Thursday",
                "Friday",
                "Saturday"
              ],
              "opens": "09:00",
              "closes": "17:00"
            }
          ],
          "sameAs": [
            "https://www.facebook.com/share/17Ww1VkV2S/",
            "https://wa.me/message/XSPMWKK4BGVAM1"
          ]
        },
        {
          "@type": "FAQPage",
          "mainEntity": [
            {
              "@type": "Question",
              "name": "How is vehicle import tax calculated in Sri Lanka?",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "Vehicle import tax in Sri Lanka combines Customs Import Duty (CID), Surcharge, Excise Duty, Luxury Tax, Vehicle Entitlement Levy (VEL), and VAT. Amounts depend on CIF value, engine/motor capacity (CC/kW), fuel type, and age. Our calculator uses 2025 Gazette rates for accurate tax breakdowns."
              }
            },
            {
              "@type": "Question",
              "name": "What is the difference between a petrol hybrid and an e-SMART hybrid for tax purposes?",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "Sri Lankan Customs distinguishes regular hybrids (e.g., Toyota Aqua) from e-SMART hybrids (e.g., Nissan Note e-Power). e-SMART vehicles have unique tax rates based on electric motor capacity and generator type. Our tool ensures accurate calculations."
              }
            },
            {
              "@type": "Question",
              "name": "Is the tax rate for electric vehicles the same as petrol vehicles in Sri Lanka?",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "No, electric vehicles (EVs) have a distinct tax structure based on motor capacity (kW) and age, with lower rates to promote adoption. Our calculator provides precise tax estimates for EVs, petrol, and diesel vehicles."
              }
            },
            {
              "@type": "Question",
              "name": "How to calculate import duty for electric vehicles in Sri Lanka?",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "Electric vehicle duties are based on motor capacity (kW) and age, including CID, VEL, VAT, and others. Use our calculator for accurate EV tax estimates."
              }
            },
            {
              "@type": "Question",
              "name": "How to calculate luxury tax for vehicle imports in Sri Lanka?",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "Luxury Tax applies when CIF exceeds thresholds: Petrol/Diesel (5M LKR), Hybrid/Plug-in (5.5M LKR), Electric/e-SMART (6M LKR). Rates vary: Petrol (100%), Diesel (120%), Hybrids (80-90%), Electric/e-SMART (60%). Our calculator applies these rates automatically."
              }
            },
            {
              "@type": "Question",
              "name": "What are HS codes and how do they affect vehicle import taxes in Sri Lanka?",
              "acceptedAnswer": {
                "@type": "Answer",
                "text": "HS codes classify vehicles (e.g., Petrol: 8703.2x.xx, Electric: 8703.8x.xx), determining tax rates. Our calculator uses these codes for precise tax estimates."
              }
            }
          ]
        },
        {
          "@type": "BreadcrumbList",
          "itemListElement": [
            {
              "@type": "ListItem",
              "position": 1,
              "name": "Home",
              "item": "https://amarasingheprime.lk/"
            },
            {
              "@type": "ListItem",
              "position": 2,
              "name": "Vehicle Tax Calculator",
              "item": "https://amarasingheprime.lk"
            }
          ]
        },
        {
          "@type": "WebPage",
          "name": "Sri Lanka Vehicle Tax Calculator 2025",
          "description": "Calculate vehicle import taxes for Sri Lanka in 2025 with Amarasinghe Prime Enterprises' accurate online tool.",
          "url": "https://amarasingheprime.lk",
          "publisher": {
            "@type": "Organization",
            "name": "Amarasinghe Prime Enterprises (Pvt) Ltd",
            "logo": {
              "@type": "ImageObject",
              "url": "https://amarasingheprime.lk/logo.png"
            }
          },
          "datePublished": "2025-01-01",
          "dateModified": "2025-10-12"
        }
      ]
    }
    </script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-XXXXX-Y"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-XXXXX-Y', { 'page_path': '/vehicle-tax-calculator.html' });
    </script>
</head>
<body>
    <header>
        <img src="/logo.png" alt="Amarasinghe Prime Enterprises Logo" width="160" height="75" loading="lazy">
        <h1>Sri Lanka Vehicle Tax Calculator 2025 - Amarasinghe Prime Enterprises</h1>
        <div class="tagline">Your trusted Japanese automobile partner in Sri Lanka</div>
        <div id="timeDateTime" aria-live="polite"></div>
    </header>
    <div class="contact" id="contact-row">
        <a class="chip phone-chip" href="tel:+94769447740" aria-label="Call Amarasinghe Prime Enterprises at +94 76 944 7740">
            <i class="fas fa-phone" aria-hidden="true"></i> <strong>+94 76 944 7740</strong>
        </a>
        <a class="chip whatsapp-chip" href="https://wa.me/message/XSPMWKK4BGVAM1" target="_blank" rel="noopener" aria-label="Contact via WhatsApp">
            <i class="fab fa-whatsapp" aria-hidden="true"></i> WhatsApp
        </a>
        <a class="chip facebook-chip" href="https://www.facebook.com/share/17Ww1VkV2S/" target="_blank" rel="noopener" aria-label="Visit our Facebook page">
            <i class="fab fa-facebook" aria-hidden="true"></i> Facebook
        </a>
    </div>
    <div class="marketing-banner">
        <a href="https://amarasingheprime.lk/who-we-are.html" target="_blank" rel="noopener">Contact us to Personally import your dream vehicle from Japan with absolute reliability</a>
    </div>
    <div class="social-proof">
        <p>⭐ Rated 4.9/5 by 25+ users for accurate Sri Lanka vehicle tax calculations!</p>
    </div>
    <div class="container-main">
        <section class="form-section" aria-labelledby="form-section-title">
            <h2 class="form-section-title" id="form-section-title">Calculate Vehicle Import Taxes for Sri Lanka (2025 Gazette Rates)</h2>
            <form id="taxCalculatorForm" aria-describedby="form-instructions">
                <p id="form-instructions" class="sr-only">Complete all fields to calculate vehicle import taxes based on 2025 Sri Lanka Gazette rates.</p>
                <div id="cbslRate" aria-live="polite">Fetching rate...</div>
                <label for="cifJPY">CIF Value (JPY):</label>
                <input type="number" id="cifJPY" required min="0" step="any" aria-describedby="cifJPY-help">
                <p id="cifJPY-help" class="sr-only">Enter the Cost, Insurance, and Freight value in Japanese Yen.</p>
                <label for="exchangeRate">Exchange Rate (JPY/LKR, e.g., 2.1):</label>
                <input type="number" id="exchangeRate" required min="0" step="any" aria-describedby="exchangeRate-help">
                <p id="exchangeRate-help" class="sr-only">Enter the exchange rate from Japanese Yen to Sri Lankan Rupees.</p>
                <label for="vehicleType">Vehicle Type:</label>
                <select id="vehicleType" required aria-describedby="vehicleType-help">
                    <option value="">Select Vehicle Type</option>
                    <option value="petrol">Petrol</option>
                    <option value="diesel">Diesel</option>
                    <option value="petrol_hybrid">Petrol Hybrid</option>
                    <option value="diesel_hybrid">Diesel Hybrid</option>
                    <option value="petrol_plugin">Petrol Plug-in Hybrid</option>
                    <option value="diesel_plugin">Diesel Plug-in Hybrid</option>
                    <option value="electric">Electric</option>
                    <option value="esmart_petrol">e-SMART Hybrid (Petrol Generator)</option>
                    <option value="esmart_diesel">e-SMART Hybrid (Diesel Generator)</option>
                </select>
                <p id="vehicleType-help" class="sr-only">Select the type of vehicle to calculate applicable taxes.</p>
                <label for="capacity">Engine/Motor Capacity (CC or kW):</label>
                <input type="number" id="capacity" required min="0" step="any" aria-describedby="capacity-help">
                <p id="capacity-help" class="sr-only">Enter the engine capacity in CC for fuel vehicles or motor capacity in kW for electric vehicles.</p>
                <label for="age">Vehicle Age:</label>
                <select id="age" required aria-describedby="age-help">
                    <option value="">Select Age</option>
                    <option value="1">Not more than 1 year old</option>
                    <option value="2">More than 1 year but not more than 3 years old</option>
                </select>
                <p id="age-help" class="sr-only">Select the age of the vehicle to determine tax rates.</p>
                <label for="dealerFee">Dealer Fee (LKR, e.g., 300000):</label>
                <input type="number" id="dealerFee" min="0" step="any" aria-describedby="dealerFee-help">
                <p id="dealerFee-help" class="sr-only">Enter the dealer fee in Sri Lankan Rupees, if applicable.</p>
                <label for="clearingFee">Clearing Agent Fee (LKR, e.g., 80000):</label>
                <input type="number" id="clearingFee" min="0" step="any" aria-describedby="clearingFee-help">
                <p id="clearingFee-help" class="sr-only">Enter the clearing agent fee in Sri Lankan Rupees, if applicable.</p>
                <div class="btn-row">
                    <button type="button" class="blue-btn" id="calculateBtn" onclick="calculateTax()">Calculate Tax</button>
                    <button type="button" class="blue-btn" id="resetBtn" onclick="resetForm()">Reset</button>
                </div>
            </form>
        </section>
        <section class="result-section" aria-labelledby="result-section-title">
            <h2 class="result-section-title" id="result-section-title">Calculation Result</h2>
            <div id="result" aria-live="polite">
                <p class="result-placeholder">Add input data and click the Calculate Tax button to get results</p>
                <p class="result-help">Need help importing your vehicle to Sri Lanka? <a href="https://wa.me/message/XSPMWKK4BGVAM1" target="_blank" rel="noopener">Contact us on WhatsApp</a> for expert assistance!</p>
            </div>
            <div class="btn-row">
                <button id="downloadBtn" class="blue-btn" onclick="downloadPDF()">Save as PDF</button>
            </div>
            <canvas id="pieChart" width="360" height="180" aria-label="Pie chart showing cost breakdown"></canvas>
        </section>
    </div>
    
    <section class="info-section" aria-labelledby="info-section-title">
        <h2 id="info-section-title">Understanding Vehicle Taxes in Sri Lanka</h2>
        <p>Understand the taxes that make up the total vehicle import cost for Sri Lankan importers. Below is a breakdown of the main taxes applied in Sri Lanka. For accurate CIF values, <a href="https://wa.me/message/XSPMWKK4BGVAM1" target="_blank" rel="noopener">contact our team</a> for expert guidance.</p>
        <ul>
            <li>
                <h3>Customs Import Duty (CID)</h3>
                <p>A base tax of 20% of the vehicle's CIF (Cost, Insurance, and Freight) value. See the <a href="http://www.customs.gov.lk/wp-content/uploads/2025/08/Tariff%202022%20Chapter%20-%2087%20Final.pdf" target="_blank" rel="noopener">Sri Lanka Customs Guide</a>.</p>
            </li>
            <li>
                <h3>Surcharge on CID</h3>
                <p>A 50% tax on top of the CID, increasing it to 30% of the CIF value. See the <a href="https://www.treasury.gov.lk/api/file/50324d16-41ec-4512-bd1f-f12e38578425" target="_blank" rel="noopener">Surcharge Gazette</a>.</p>
            </li>
            <li>
                <h3>Excise Duty</h3>
                <p>A major tax based on engine capacity and fuel type, per the latest Excise Duty Gazettes: <a href="https://documents.gov.lk/view/extra-gazettes/2025/1/2418-43_E.pdf" target="_blank" rel="noopener">2418/43</a>, <a href="https://documents.gov.lk/view/extra-gazettes/2025/1/2421-42_E.pdf" target="_blank" rel="noopener">2421/42</a>, <a href="https://documents.gov.lk/view/extra-gazettes/2025/1/2434-04_E.pdf" target="_blank" rel="noopener">2434/04</a>.</p>
            </li>
            <li>
                <h3>Luxury Tax</h3>
                <p>Applied when CIF value exceeds thresholds by fuel type. See the <a href="https://www.treasury.gov.lk/api/file/67450b38-5230-411c-a703-a07a7ef9063c" target="_blank" rel="noopener">Luxury Tax Gazette</a>.</p>
            </li>
            <li>
                <h3>Vehicle Entitlement Levy (VEL)</h3>
                <p>A flat Rs.15,000 for motor cars. See the <a href="https://www.ird.gov.lk/en/publications/Circulars_Circulars/SEC_2016_01_E.pdf" target="_blank" rel="noopener">VEL Circular</a>.</p>
            </li>
            <li>
                <h3>Value Added Tax (VAT)</h3>
                <p>An 18% tax on the sum of CIF and other taxes. See the <a href="http://www.customs.gov.lk/wp-content/uploads/2025/08/Tariff%202022%20Chapter%20-%2087%20Final.pdf" target="_blank" rel="noopener">Customs Duty and VAT Guide</a>.</p>
            </li>
        </ul>
    </section>
    
    <section class="faq-section" aria-labelledby="faq-section-title">
        <h2 id="faq-section-title">Frequently Asked Questions about Sri Lankan Vehicle Import Tax</h2>
        <div class="faq-item">
            <h3 onclick="toggleAnswer(this)">1. How do I calculate the import tax for a vehicle in Sri Lanka? <i class="fas fa-chevron-down faq-indicator"></i></h3>
            <p>The total import tax includes CID, Surcharge, Excise Duty, Luxury Tax, VEL, and VAT, based on CIF value, engine/motor capacity, fuel type, and age. Our calculator uses 2025 Gazette rates for accurate estimates.</p>
        </div>
        <div class="faq-item">
            <h3 onclick="toggleAnswer(this)">2. What is the CIF Value and why is it important? <i class="fas fa-chevron-down faq-indicator"></i></h3>
            <p>CIF (Cost, Insurance, Freight) is the vehicle's total value upon arrival in Sri Lanka, used as the base for CID and VAT calculations. Accurate CIF values ensure precise tax estimates.</p>
        </div>
        <div class="faq-item">
            <h3 onclick="toggleAnswer(this)">3. Are hybrid vehicles taxed differently? <i class="fas fa-chevron-down faq-indicator"></i></h3>
            <p>Yes, hybrids (petrol, diesel, plug-in) have different excise duty rates to promote eco-friendly vehicles. Our calculator reflects these rates for accurate tax figures.</p>
        </div>
        <div class="faq-item">
            <h3 onclick="toggleAnswer(this)">4. How to calculate import duty for electric vehicles? <i class="fas fa-chevron-down faq-indicator"></i></h3>
            <p>Electric vehicle duties are based on motor capacity (kW) and age, including CID, VEL, VAT, and others. Use our calculator for precise EV tax estimates.</p>
        </div>
        <div class="faq-item">
            <h3 onclick="toggleAnswer(this)">5. How to calculate luxury tax for vehicle imports? <i class="fas fa-chevron-down faq-indicator"></i></h3>
            <p>Luxury Tax applies when CIF exceeds thresholds: Petrol/Diesel (5M LKR), Hybrid/Plug-in (5.5M LKR), Electric/e-SMART (6M LKR). Rates vary, and our calculator applies them automatically.</p>
        </div>
        <div class="faq-item">
            <h3 onclick="toggleAnswer(this)">6. What are HS codes and how do they affect taxes? <i class="fas fa-chevron-down faq-indicator"></i></h3>
            <p>HS codes classify vehicles (e.g., Petrol: 8703.2x.xx, Electric: 8703.8x.xx), determining tax rates. Our calculator uses these codes for accurate tax estimates.</p>
        </div>
    </section>
    
    <section class="disclaimer-section" aria-labelledby="disclaimer-section-title">
        <h2 id="disclaimer-section-title">Disclaimer & HS Codes</h2>
        <p>Vehicle taxes in Sri Lanka are based on HS codes, such as petrol (8703.2x.xx), diesel (8703.3x.xx), and electric (8703.8x.xx). Our calculations align with these codes for Sri Lankan importers.</p>
        <p><strong>Important Note:</strong> This calculator is for standard motor cars within the listed HS codes and does not support special-purpose vehicles like hearses or ambulances.</p>
    </section>

    <footer>© 2025 Amarasinghe Prime Enterprises (Pvt) Ltd (PV 00342707)</footer>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.2/jspdf.plugin.autotable.min.js" defer></script>
    <script>
        let resultData = null;
        let fetchedExchangeRate = null;

        function updateDateTime() {
            const el = document.getElementById('timeDateTime');
            el.textContent = `Time: ${new Date().toLocaleString('en-GB', { timeZone: 'Asia/Colombo' })}`;
        }
        setInterval(updateDateTime, 1000);
        updateDateTime();

        async function fetchBOCJPYRate() {
            const rateEl = document.getElementById('cbslRate');
            const exchangeRateInput = document.getElementById('exchangeRate');
            try {
                const response = await fetch('https://amarasingheprime.lk/rate.json');
                if (!response.ok) throw new Error('Failed to fetch rate: Status ' + response.status);
                const data = await response.json();
                const sellingRate = data.sellingRate;
                const updatedDate = data.updatedDate;
                rateEl.innerHTML = `<div style="font-weight:700;color:var(--primary)">Exchange Rate: JPY/LKR = ${sellingRate}</div><div style="font-size:0.85em;color:var(--muted)">Source: Central Bank of Sri Lanka (Updated: ${updatedDate})</div>`;
                fetchedExchangeRate = parseFloat(sellingRate);
                exchangeRateInput.value = fetchedExchangeRate.toFixed(6);
                return fetchedExchangeRate;
            } catch (error) {
                console.error('Error fetching BOC rate:', error.message);
                const fallbackRate = '2.0190';
                const fallbackDate = '12/10/2025, 23:02:00';
                rateEl.innerHTML = `<div style="font-weight:700;color:var(--primary)">Exchange Rate: JPY/LKR = ${fallbackRate}</div><div style="font-size:0.85em;color:var(--muted)">Source: Central Bank of Sri Lanka (Updated: ${fallbackDate}) - Using fallback rate.</div>`;
                fetchedExchangeRate = parseFloat(fallbackRate);
                exchangeRateInput.value = fetchedExchangeRate.toFixed(6);
                return fetchedExchangeRate;
            }
        }

        function fmt(val, decimals = 2) {
            return Number(val).toLocaleString('en-US', { minimumFractionDigits: decimals, maximumFractionDigits: decimals });
        }

        function calculateTax() {
            const cifJPY = parseFloat(document.getElementById('cifJPY').value);
            const exchangeRate = parseFloat(document.getElementById('exchangeRate').value) || fetchedExchangeRate;
            const type = document.getElementById('vehicleType').value;
            const capacity = parseFloat(document.getElementById('capacity').value);
            const age = document.getElementById('age').value;
            const dealerFee = parseFloat(document.getElementById('dealerFee').value) || 0;
            const clearingFee = parseFloat(document.getElementById('clearingFee').value) || 0;

            if (isNaN(cifJPY)) {
                alert('Please add CIF Value (JPY).');
                return;
            }
            if (isNaN(exchangeRate)) {
                alert('Please add Exchange Rate (JPY/LKR).');
                return;
            }
            if (!type) {
                alert('Please select Vehicle Type.');
                return;
            }
            if (isNaN(capacity)) {
                alert('Please add Engine/Motor Capacity (CC or kW).');
                return;
            }
            if (!age) {
                alert('Please select Vehicle Age.');
                return;
            }

            const cif = cifJPY * exchangeRate;
            const thresholds = {
                petrol: 5000000, diesel: 5000000, petrol_hybrid: 5500000,
                diesel_hybrid: 5500000, petrol_plugin: 5500000, diesel_plugin: 5500000,
                electric: 6000000, esmart_petrol: 6000000, esmart_diesel: 6000000
            };
            const luxuryRates = {
                petrol: 1.0, diesel: 1.2, petrol_hybrid: 0.8,
                diesel_hybrid: 0.9, petrol_plugin: 0.8, diesel_plugin: 0.9,
                electric: 0.6, esmart_petrol: 0.6, esmart_diesel: 0.6
            };

            const threshold = thresholds[type];
            const luxuryRate = luxuryRates[type];

            const cid = cif * 0.2;
            const surcharge = cid * 0.5;
            let excise = 0;

            if (type === 'petrol' || type === 'petrol_hybrid') {
                if (capacity < 300) excise = 482900;
                else if (capacity < 1000) excise = Math.max(1992000, capacity * 2450);
                else if (capacity <= 1300) excise = capacity * 3850;
                else if (capacity <= 1500) excise = capacity * 4450;
                else if (capacity <= 1600) excise = capacity * 5150;
                else if (capacity <= 1800) excise = capacity * 6400;
                else if (capacity <= 2000) excise = capacity * 7700;
                else if (capacity <= 2500) excise = capacity * 8450;
                else if (capacity <= 2750) excise = capacity * 9650;
                else if (capacity <= 3000) excise = capacity * 10850;
                else if (capacity <= 4000) excise = capacity * 12050;
                else excise = capacity * 13300;
            } else if (type === 'diesel' || type === 'diesel_hybrid') {
                if (capacity < 1500) excise = capacity * 5550;
                else if (capacity <= 1600) excise = capacity * 6950;
                else if (capacity <= 1800) excise = capacity * 8300;
                else if (capacity <= 2000) excise = capacity * 9650;
                else if (capacity <= 2500) excise = capacity * 9650;
                else if (capacity <= 2750) excise = capacity * 12050;
                else if (capacity <= 3000) excise = capacity * 13550;
                else if (capacity <= 4000) excise = capacity * 12050;
                else excise = capacity * 13300;
            } else if (type === 'electric' || type === 'petrol_plugin' || type === 'diesel_plugin') {
                let rate1, rate2;
                if (capacity <= 50) { rate1 = 18100; rate2 = 36200; }
                else if (capacity <= 100) { rate1 = 24100; rate2 = 36200; }
                else if (capacity <= 200) { rate1 = 36200; rate2 = 60400; }
                else { rate1 = 96600; rate2 = 132800; }
                excise = age === '1' ? rate1 * capacity : rate2 * capacity;
            } else if (type === 'esmart_petrol') {
                let rate1, rate2;
                if (capacity <= 50) { rate1 = 43440; rate2 = 30770; }
                else if (capacity <= 100) { rate1 = 43440; rate2 = 40970; }
                else if (capacity <= 200) { rate1 = 63420; rate2 = 41630; }
                else { rate1 = 139440; rate2 = 111090; }
                excise = age === '1' ? rate1 * capacity : rate2 * capacity;
            } else if (type === 'esmart_diesel') {
                let rate1, rate2;
                if (capacity <= 50) { rate1 = 52130; rate2 = 36920; }
                else if (capacity <= 100) { rate1 = 52130; rate2 = 49160; }
                else if (capacity <= 200) { rate1 = 76100; rate2 = 49960; }
                else { rate1 = 167330; rate2 = 133310; }
                excise = age === '1' ? rate1 * capacity : rate2 * capacity;
            }

            const luxuryTax = cif > threshold ? (cif - threshold) * luxuryRate : 0;
            const vel = 15000;
            const vatBase = cif + cid + surcharge + excise + luxuryTax + vel;
            const vat = vatBase * 0.18;
            const totalTax = cid + surcharge + excise + luxuryTax + vel + vat;
            const otherCharges = dealerFee + clearingFee;
            const total = cif + totalTax + otherCharges;

            resultData = {
                cifJPY, exchangeRate, cif, type, 
                capacity, age, dealerFee, 
                clearingFee, cid, surcharge, excise, luxuryTax, vel, vat, totalTax, otherCharges, total
            };

            const unit = type.includes('electric') || type.includes('plugin') || type.includes('esmart') ? 'kW' : 'cc';
            const inputsTable = `
                <div style="font-weight:700;margin-bottom:0.375rem;color:var(--primary)">Inputs</div>
                <table>
                    <thead><tr><th scope="col">Item</th><th scope="col" style="text-align:right">Value</th></tr></thead>
                    <tbody>
                        <tr><td>CIF (JPY)</td><td style="text-align:right">${fmt(cifJPY)}</td></tr>
                        <tr><td>Exchange Rate (JPY→LKR)</td><td style="text-align:right">${fmt(exchangeRate, 6)}</td></tr>
                        <tr><td>CIF (LKR)</td><td style="text-align:right">${fmt(cif)}</td></tr>
                        <tr><td>Vehicle Type</td><td style="text-align:right">${type.replace('_', ' ').toUpperCase()}</td></tr>
                        <tr><td>Engine/Motor Capacity</td><td style="text-align:right">${fmt(capacity)} ${unit}</td></tr>
                        <tr><td>Vehicle Age</td><td style="text-align:right">${age === '1' ? '≤1 year' : '>1–3 years'}</td></tr>
                        <tr><td>Dealer Fee (LKR)</td><td style="text-align:right">${fmt(dealerFee)}</td></tr>
                        <tr><td>Clearing Agent Fee (LKR)</td><td style="text-align:right">${fmt(clearingFee)}</td></tr>
                    </tbody>
                </table>
            `;
            const pct = val => total > 0 ? ((val / total) * 100).toFixed(2) : '0.00';
            const breakdownTable = `
                <div style="font-weight:700;margin:1.125rem 0 0.375rem;color:var(--primary)">Cost Breakdown</div>
                <table>
                    <thead>
                        <tr>
                            <th scope="col">Item</th>
                            <th scope="col" style="text-align:right">Value (LKR)</th>
                            <th scope="col" style="text-align:right">% of Total</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>CIF</td><td style="text-align:right">${fmt(cif)}</td><td style="text-align:right">${pct(cif)}%</td></tr>
                        <tr><td>CID</td><td style="text-align:right">${fmt(cid)}</td><td style="text-align:right">${pct(cid)}%</td></tr>
                        <tr><td>Surcharge</td><td style="text-align:right">${fmt(surcharge)}</td><td style="text-align:right">${pct(surcharge)}%</td></tr>
                        <tr><td>Excise Duty</td><td style="text-align:right">${fmt(excise)}</td><td style="text-align:right">${pct(excise)}%</td></tr>
                        <tr><td>Luxury Tax</td><td style="text-align:right">${fmt(luxuryTax)}</td><td style="text-align:right">${pct(luxuryTax)}%</td></tr>
                        <tr><td>VEL</td><td style="text-align:right">${fmt(vel)}</td><td style="text-align:right">${pct(vel)}%</td></tr>
                        <tr><td>VAT</td><td style="text-align:right">${fmt(vat)}</td><td style="text-align:right">${pct(vat)}%</td></tr>
                        <tr><td>Total Tax & Duties</td><td style="text-align:right">${fmt(totalTax)}</td><td style="text-align:right">${pct(totalTax)}%</td></tr>
                        <tr><td>Other Charges (Dealer & Clearing Fees)</td><td style="text-align:right">${fmt(otherCharges)}</td><td style="text-align:right">${pct(otherCharges)}%</td></tr>
                    </tbody>
                    <tfoot>
                        <tr>
                            <td>Total Import Cost</td>
                            <td style="text-align:right">${fmt(total)}</td>
                            <td style="text-align:right">100.00%</td>
                        </tr>
                    </tfoot>
                </table>
            `;
            document.getElementById('result').innerHTML = inputsTable + breakdownTable;
            document.querySelector('.result-placeholder').style.display = 'none';
            document.querySelector('.result-help').style.display = 'none';
            showPieChart([
                { label: 'CIF', value: cif },
                { label: 'Total Tax & Duties', value: totalTax },
                { label: 'Other Charges (Dealer & Clearing Fees)', value: otherCharges }
            ], total);
            document.getElementById('result').style.display = 'block';
            document.getElementById('downloadBtn').style.display = 'block';

            if (window.innerWidth <= 640) {
                document.getElementById('result').scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        function createRow(name, value, percentStr) {
            return `<tr><td>${name}</td><td style="text-align:right">${fmt(value)}</td><td style="text-align:right">${percentStr}%</td></tr>`;
        }

        function resetForm() {
            document.getElementById('taxCalculatorForm').reset();
            document.getElementById('result').innerHTML = `
                <p class="result-placeholder">Add input data and click the Calculate Tax button to get results</p>
                <p class="result-help">Need help importing your vehicle to Sri Lanka? <a href="https://wa.me/message/XSPMWKK4BGVAM1" target="_blank" rel="noopener">Contact us on WhatsApp</a> for expert assistance!</p>
            `;
            document.querySelector('.result-placeholder').style.display = 'block';
            document.querySelector('.result-help').style.display = 'block';
            document.getElementById('result').style.display = 'block';
            document.getElementById('downloadBtn').style.display = 'none';
            document.getElementById('pieChart').style.display = 'none';
            if (window.pieChartInstance) window.pieChartInstance.destroy();
            resultData = null;
            document.getElementById('exchangeRate').value = fetchedExchangeRate ? fetchedExchangeRate.toFixed(6) : '';
        }

        function showPieChart(items, total) {
            const labels = items.map(i => {
                const pct = ((i.value / total) * 100).toFixed(2);
                return `${i.label} (${pct}%)`;
            });
            const values = items.map(i => i.value);
            const colors = ['#7ea1e7', '#cfe2fa', '#98e4bb'];
            const canvas = document.getElementById('pieChart');
            canvas.style.display = 'block';
            if (window.pieChartInstance) window.pieChartInstance.destroy();
            window.pieChartInstance = new Chart(canvas, {
                type: 'pie',
                data: {
                    labels: labels,
                    datasets: [{
                        data: values,
                        backgroundColor: colors,
                        borderWidth: 2,
                        borderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: { color: '#003087', font: { size: 13, weight: '600' } }
                        },
                        tooltip: {
                            callbacks: {
                                label: function(ctx) {
                                    const pct = ((ctx.parsed / total) * 100).toFixed(2);
                                    return `${ctx.label}: ${fmt(ctx.parsed)} LKR (${pct}%)`;
                                }
                            }
                        }
                    }
                }
            });
        }

        function downloadPDF() {
            if (!resultData) {
                alert('Please calculate the tax first.');
                return;
            }
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF({ unit: 'pt', format: 'a4' });
            const pageW = doc.internal.pageSize.width;
            let y = 40;

            doc.setFont('helvetica', 'bold');
            doc.setFontSize(26);
            doc.setTextColor(0, 48, 135);
            doc.text('Amarasinghe Prime Enterprises (Pvt) Ltd', pageW / 2, y, { align: 'center' });
            y += 26;
            doc.setFontSize(13);
            doc.setTextColor(91, 91, 91);
            doc.text('Your trusted Japanese automobile partner in Sri Lanka', pageW / 2, y, { align: 'center' });
            y += 20;
            doc.setFontSize(11);
            doc.setTextColor(120, 120, 120);
            doc.text(`Generated: ${new Date().toLocaleString('en-GB', { timeZone: 'Asia/Colombo' })}`, pageW / 2, y, { align: 'center' });
            y += 20;

            const chipH = 28, chipGap = 18, chipFont = 12;
            const phoneW = 120, whatsappW = 105, facebookW = 105;
            const rowW = phoneW + whatsappW + facebookW + chipGap * 2;
            const leftX = pageW / 2 - rowW / 2;

            doc.setFillColor(244, 244, 244);
            doc.roundedRect(leftX, y, phoneW, chipH, 10, 10, 'F');
            doc.setDrawColor(209, 209, 209);
            doc.roundedRect(leftX, y, phoneW, chipH, 10, 10, 'S');
            doc.setFont('helvetica', 'bold');
            doc.setFontSize(chipFont);
            doc.setTextColor(68, 68, 68);
            doc.text('+94 76 944 7740', leftX + phoneW / 2, y + chipH / 2 + chipFont / 3.5, { align: 'center' });
            doc.link(leftX, y, phoneW, chipH, { url: 'tel:+94769447740' });

            doc.setFillColor(230, 247, 236);
            doc.roundedRect(leftX + phoneW + chipGap, y, whatsappW, chipH, 10, 10, 'F');
            doc.setDrawColor(185, 234, 199);
            doc.roundedRect(leftX + phoneW + chipGap, y, whatsappW, chipH, 10, 10, 'S');
            doc.setTextColor(34, 158, 89);
            doc.text('WhatsApp', leftX + phoneW + chipGap + whatsappW / 2, y + chipH / 2 + chipFont / 3.5, { align: 'center' });
            doc.link(leftX + phoneW + chipGap, y, whatsappW, chipH, { url: 'https://wa.me/message/XSPMWKK4BGVAM1' });

            doc.setFillColor(227, 237, 251);
            doc.roundedRect(leftX + phoneW + chipGap + whatsappW + chipGap, y, facebookW, chipH, 10, 10, 'F');
            doc.setDrawColor(182, 210, 247);
            doc.roundedRect(leftX + phoneW + chipGap + whatsappW + chipGap, y, facebookW, chipH, 10, 10, 'S');
            doc.setTextColor(24, 119, 243);
            doc.text('Facebook', leftX + phoneW + chipGap + whatsappW + chipGap + facebookW / 2, y + chipH / 2 + chipFont / 3.5, { align: 'center' });
            doc.link(leftX + phoneW + chipGap + whatsappW + chipGap, y, facebookW, chipH, { url: 'https://www.facebook.com/share/17Ww1VkV2S/' });

            y += 50;
            doc.setFontSize(16);
            doc.setTextColor(0, 48, 135);
            doc.text('Vehicle Tax Calculator for Sri Lanka (2025 Gazette Rates)', pageW / 2, y, { align: 'center' });
            y += 18;

            const unit = resultData.type.includes('electric') || resultData.type.includes('plugin') || resultData.type.includes('esmart') ? 'kW' : 'cc';
            const inputRows = [
                ['CIF Value (JPY)', fmt(resultData.cifJPY)],
                ['Exchange Rate (JPY→LKR)', fmt(resultData.exchangeRate, 6)],
                ['Fuel Type', resultData.type.replace('_', ' ').toUpperCase()],
                ['Engine/Motor Capacity', `${fmt(resultData.capacity)} ${unit}`],
                ['Vehicle Age', resultData.age === '1' ? '≤1 year' : '>1–3 years'],
                ['Dealer Fee (LKR)', fmt(resultData.dealerFee)],
                ['Clearing Agent Fee (LKR)', fmt(resultData.clearingFee)]
            ];
            doc.autoTable({
                startY: y,
                head: [['Input Parameter', 'Value']],
                body: inputRows,
                theme: 'grid',
                headStyles: {
                    fillColor: [0, 48, 135],
                    textColor: [255, 255, 255],
                    fontStyle: 'bold',
                    fontSize: 12,
                    halign: 'left',
                    valign: 'middle'
                },
                bodyStyles: {
                    fontSize: 11,
                    textColor: [40, 40, 40],
                    halign: 'left',
                    valign: 'middle'
                },
                alternateRowStyles: { fillColor: [240, 244, 250] },
                margin: { left: 60, right: 60 }
            });

            y = doc.lastAutoTable.finalY + 24;
            doc.setFontSize(13);
            doc.setTextColor(0, 48, 135);
            doc.text('Calculation Result', 60, y);
            y += 10;

            const taxBreakdown = [
                ['CID - Custom Import Duty', fmt(resultData.cid)],
                ['Surcharge', fmt(resultData.surcharge)],
                ['Excise Duty', fmt(resultData.excise)],
                ['Luxury Tax', fmt(resultData.luxuryTax)],
                ['VEL', fmt(resultData.vel)],
                ['VAT', fmt(resultData.vat)]
            ];
            doc.autoTable({
                startY: y,
                head: [['Tax Type', 'Amount (LKR)']],
                body: taxBreakdown,
                theme: 'grid',
                headStyles: {
                    fillColor: [0, 48, 135],
                    textColor: [255, 255, 255],
                    fontStyle: 'bold',
                    fontSize: 12,
                    halign: 'left',
                    valign: 'middle'
                },
                bodyStyles: {
                    fontSize: 11,
                    textColor: [40, 40, 40],
                    halign: 'left',
                    valign: 'middle'
                },
                alternateRowStyles: { fillColor: [240, 244, 250] },
                margin: { left: 60, right: 60 }
            });

            y = doc.lastAutoTable.finalY + 24;
            const summaryRows = [
                ['CIF (LKR)', 'Total Tax & Duties', 'Other Charges', 'Total Cost'],
                [fmt(resultData.cif), fmt(resultData.totalTax), fmt(resultData.otherCharges), fmt(resultData.total)]
            ];
            doc.autoTable({
                startY: y,
                head: summaryRows.slice(0, 1),
                body: summaryRows.slice(1),
                theme: 'grid',
                headStyles: {
                    fillColor: [0, 48, 135],
                    textColor: [255, 255, 255],
                    fontStyle: 'bold',
                    fontSize: 12,
                    halign: 'left',
                    valign: 'middle'
                },
                bodyStyles: {
                    fontSize: 11,
                    textColor: [40, 40, 40],
                    halign: 'left',
                    valign: 'middle'
                },
                alternateRowStyles: { fillColor: [240, 244, 250] },
                margin: { left: 60, right: 60 }
            });

            y = doc.lastAutoTable.finalY + 30;
            doc.setFontSize(8);
            doc.setTextColor(100, 100, 100);
            const disclaimerText = "Disclaimer: This calculator provides estimates based on 2025 Sri Lankan tax laws for vehicles under HS codes 8703.xx.xx. We are not responsible for future changes in tax laws or policies.";
            const disclaimerLines = doc.splitTextToSize(disclaimerText, pageW - 120);
            doc.text(disclaimerLines, pageW / 2, y, { align: 'center' });
            y += doc.getTextDimensions(disclaimerLines).h + 10;
            doc.text('© 2025 Amarasinghe Prime Enterprises (Pvt) Ltd (PV 00342707)', pageW / 2, doc.internal.pageSize.height - 20, { align: 'center' });

            doc.save('Vehicle_Tax_Calculation_2025.pdf');
        }

        function toggleAnswer(element) {
            const item = element.closest('.faq-item');
            item.classList.toggle('active');
            const indicator = item.querySelector('.faq-indicator');
            if (item.classList.contains('active')) {
                indicator.style.transform = 'rotate(90deg)';
            } else {
                indicator.style.transform = 'rotate(0deg)';
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('input, select').forEach(input => {
                input.addEventListener('invalid', () => {
                    input.setCustomValidity('Please fill out this field correctly.');
                });
                input.addEventListener('input', () => {
                    input.setCustomValidity('');
                });
            });
            fetchBOCJPYRate();
            resetForm(); // Initialize with placeholders
        });
    </script>
</body>
</html>
